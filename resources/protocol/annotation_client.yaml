# -----------------------------------------------------------------
# Generic Types
# -----------------------------------------------------------------

BlockPosition:
  fields:
    - x: int32
    - y: uint8
    - z: int32

Block:
  fields:
    - id: uint16
    - state: uint16
    - pos: BlockPosition

BlockRegionPosition:
  fields:
    - x: int8
    - y: uint8
    - z: int8

BlockRegion:
  fields:
    - id: uint16
    - state: uint16
    - pos: BlockRegionPosition

# -----------------------------------------------------------------
# Client
# -----------------------------------------------------------------

# -----------------------------------------------------------------
# Connecting
# -----------------------------------------------------------------

HandShake:
  fields:
    - protocol_reference: string
    - protocol_version: string

    - engine_version: string
    - api_version: string

    - friends_list: Array<string>

    - next_state: uint8

StatusRequest:
  fields:

JoinGame:
  fields:
    - username: string
    - identity: string

PackHashes:
  fields:
    - hashes: Array<PackHash>

# -----------------------------------------------------------------
# In-Game
# -----------------------------------------------------------------

Disconnect:
  fields:

PingRequest:
  fields:
    - payload: uint32

KeepAlive:
  fields:
    - challenge: uint8

PlayerPosition:
  fields:
    - pos: PlayerPos

PlayerRotation:
  fields:
    - x: degree
    - y: degree
    - z: degree

PlayerCheats:
  fields:
    - noclip: boolean
    - flight: boolean

PlayerHandSlot:
  fields:
    - slot: uint8

PlayerRegion:
  fields:
    - x: int16
    - z: int16

InventoryInteract:
  fields:
    - inventory_id: var[W+2][R-2]
    - slot: var
    - action: uint8
    - item_id: uint16
    - checksum: uint24

CloseInventory:
  fields:
    - inventory_id: var[W+2][R-2]

RequestChunk:
  fields:
    - x: int16
    - z: int16

RequestChunks:
  fields:
    - chunks: Array<int16>

ChatMessage:
  fields:
    - message: string

BlockUpdate:
  fields:
    - block: Block

BlockInteract:
  fields:
    - pos: BlockPosition

BlockDestroy:
  fields:
    - pos: BlockPosition

BlockRegionUpdate:
  fields:
    - block: BlockRegion

BlockRegionInteract:
  fields:
    - pos: BlockRegionPosition

BlockRegionDestroy:
  fields:
    - pos: BlockRegionPosition

PackEvent:
  fields:
    - pack: string
    - event: string
    - bytes: bytearray

PackEnv:
  fields:
    - pack: string
    - env: string
    - key: string
    - value: any

EntitySpawnAttempt:
  fields:
    - def: uint16
    - args: bson
